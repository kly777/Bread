console.log('Hello background!', { id: browser.runtime.id });
browser.runtime.onMessage.addListener((message, _, sendResponse) => {
    if (message.action === 'getDomain') {
        browser.tabs.query({ active: true, currentWindow: true }, (tabs) => {
            if (tabs.length > 0 && tabs[0].url) {
                const url = new URL(tabs[0].url);
                const domain = url.hostname;
                sendResponse({
                    domain: domain,
                });
            }
            else {
                sendResponse({
                    domain: null,
                });
            }
        });
        return true; // 保持消息通道开放
    }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2dyb3VuZC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vZW50cnlwb2ludHMvYmFja2dyb3VuZC9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbmNvbnNvbGUubG9nKCdIZWxsbyBiYWNrZ3JvdW5kIScsIHsgaWQ6IGJyb3dzZXIucnVudGltZS5pZCB9KVxyXG5cclxuYnJvd3Nlci5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcigobWVzc2FnZSwgXywgc2VuZFJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgaWYgKG1lc3NhZ2UuYWN0aW9uID09PSAnZ2V0RG9tYWluJykge1xyXG4gICAgICAgICAgICAgICAgYnJvd3Nlci50YWJzLnF1ZXJ5KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGFjdGl2ZTogdHJ1ZSwgY3VycmVudFdpbmRvdzogdHJ1ZSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAodGFicykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJzLmxlbmd0aCA+IDAgJiYgdGFic1swXS51cmwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwodGFic1swXS51cmwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkb21haW4gPSB1cmwuaG9zdG5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbWFpbjogZG9tYWluLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlIC8vIOS/neaMgea2iOaBr+mAmumBk+W8gOaUvlxyXG4gICAgICAgIH1cclxufSlcclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsQ0FBQztBQUU1RCxPQUFPLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLFlBQVksS0FBSTtBQUMzRCxJQUFBLElBQUksT0FBTyxDQUFDLE1BQU0sS0FBSyxXQUFXLEVBQUU7QUFDNUIsUUFBQSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FDVixFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRSxFQUNyQyxDQUFDLElBQUksS0FBSTtBQUNELFlBQUEsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFO0FBQzVCLGdCQUFBLE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7QUFDaEMsZ0JBQUEsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLFFBQVE7QUFDM0IsZ0JBQUEsWUFBWSxDQUFDO0FBQ0wsb0JBQUEsTUFBTSxFQUFFLE1BQU07QUFDckIsaUJBQUEsQ0FBQztZQUNWO2lCQUFPO0FBQ0MsZ0JBQUEsWUFBWSxDQUFDO0FBQ0wsb0JBQUEsTUFBTSxFQUFFLElBQUk7QUFDbkIsaUJBQUEsQ0FBQztZQUNWO0FBQ1IsUUFBQSxDQUFDLENBQ1I7UUFDRCxPQUFPLElBQUksQ0FBQTtJQUNuQjtBQUNSLENBQUMsQ0FBQyJ9
